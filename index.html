<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API de Libros</title>
    <script>
        async function agregarLibro(event) {
            event.preventDefault(); // Evita que la página se recargue

            // Obtiene los valores del formulario
            const titulo = document.getElementById('titulo').value;
            const autor = document.getElementById('autor').value;
            const anioPublicacion = document.getElementById('anioPublicacion').value;

            // Crea el objeto libro
            const libro = {
                titulo: titulo,
                autor: autor,
                anioPublicacion: parseInt(anioPublicacion) // Asegúrate de que el año sea un número
            };

            try {
                // Realiza la solicitud POST al endpoint XML
                const response = await fetch('http://localhost:5126/api/Xml', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(libro)
                });

                if (response.ok) {
                    alert('Libro agregado exitosamente');
                    // Opcional: limpiar el formulario
                    document.getElementById('libroForm').reset();
                } else {
                    alert('Error al agregar el libro: ' + response.statusText);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }
    </script>
</head>
<body>
    <h1>Agregar Libro</h1>
    <form id="libroForm" onsubmit="agregarLibro(event)">
        <label for="titulo">Título:</label>
        <input type="text" id="titulo" required><br><br>
        <label for="autor">Autor:</label>
        <input type="text" id="autor" required><br><br>
        <label for="anioPublicacion">Año de Publicación:</label>
        <input type="number" id="anioPublicacion" required><br><br>
        <button type="submit">Agregar Libro</button>
    </form>
</body>
</html>
